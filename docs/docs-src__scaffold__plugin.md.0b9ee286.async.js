"use strict";(self.webpackChunk_aniyajs_components=self.webpackChunk_aniyajs_components||[]).push([[8583],{41157:function(i,t,a){a.r(t);var d=a(76311),c=a(93359),x=a(61788),p=a(19977),_=a(91558),s=a(24268),h=a(96057),j=a(85939),l=a(44794),o=a(80936),r=a(67294),n=a(58932),e=a(85893);function u(){return(0,e.jsx)(l.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(o.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"plugins",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#plugins",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Plugins"]}),(0,e.jsxs)("h3",{id:"aniyajsrouter",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#aniyajsrouter",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"@aniyajs/router"]}),(0,e.jsxs)("h4",{id:"\u542F\u7528\u65B9\u5F0F",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u542F\u7528\u65B9\u5F0F",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u542F\u7528\u65B9\u5F0F"]}),(0,e.jsxs)("ol",{children:[(0,e.jsxs)("li",{children:[n.texts[0].value,(0,e.jsx)("code",{children:n.texts[1].value})]}),(0,e.jsxs)("li",{children:[n.texts[2].value,(0,e.jsx)("code",{children:n.texts[3].value}),n.texts[4].value]})]}),(0,e.jsxs)("h4",{id:"\u4ECB\u7ECD",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4ECB\u7ECD",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u4ECB\u7ECD"]}),(0,e.jsxs)("p",{children:[n.texts[5].value,(0,e.jsx)("a",{href:"https://www.npmjs.com/package/@aniyajs/plugin-router",children:(0,e.jsx)("img",{src:"https://img.shields.io/npm/v/@aniyajs/plugin-router.svg?style=flat-square",alt:"npm package"})}),n.texts[6].value,(0,e.jsx)("a",{href:"https://npmjs.org/package/@aniyajs/plugin-router",children:(0,e.jsx)("img",{src:"http://img.shields.io/npm/dm/@aniyajs/plugin-router.svg?style=flat",alt:"NPM downloads"})})]}),(0,e.jsx)("p",{children:n.texts[7].value}),(0,e.jsx)(s.Z,{lang:"js",children:n.texts[8].value}),(0,e.jsxs)("h4",{id:"\u914D\u7F6E",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u914D\u7F6E",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u914D\u7F6E"]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[9].value}),n.texts[10].value,(0,e.jsx)("code",{children:n.texts[11].value})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[12].value}),n.texts[13].value,(0,e.jsx)("code",{children:n.texts[14].value})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[15].value}),n.texts[16].value,(0,e.jsx)("code",{children:n.texts[17].value})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[18].value}),n.texts[19].value,(0,e.jsx)("code",{children:n.texts[20].value})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[21].value}),n.texts[22].value,(0,e.jsx)("code",{children:n.texts[23].value}),n.texts[24].value,(0,e.jsx)("code",{children:n.texts[25].value})]})]}),(0,e.jsxs)("h3",{id:"aniyajstooltik",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#aniyajstooltik",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"@aniyajs/tooltik"]}),(0,e.jsxs)("h4",{id:"\u542F\u7528\u65B9\u5F0F-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u542F\u7528\u65B9\u5F0F-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u542F\u7528\u65B9\u5F0F"]}),(0,e.jsxs)("ol",{children:[(0,e.jsxs)("li",{children:[n.texts[26].value,(0,e.jsx)("code",{children:n.texts[27].value})]}),(0,e.jsxs)("li",{children:[n.texts[28].value,(0,e.jsx)("code",{children:n.texts[29].value}),n.texts[30].value]})]}),(0,e.jsxs)("h4",{id:"\u4ECB\u7ECD-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4ECB\u7ECD-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u4ECB\u7ECD"]}),(0,e.jsxs)("p",{children:[n.texts[31].value,(0,e.jsx)("a",{href:"https://www.npmjs.com/package/@aniyajs/plugin-tooltik",children:(0,e.jsx)("img",{src:"https://img.shields.io/npm/v/@aniyajs/plugin-tooltik.svg?style=flat-square",alt:"npm package"})}),n.texts[32].value,(0,e.jsx)("a",{href:"https://npmjs.org/package/@aniyajs/plugin-tooltik",children:(0,e.jsx)("img",{src:"http://img.shields.io/npm/dm/@aniyajs/plugin-tooltik.svg?style=flat",alt:"NPM downloads"})})]}),(0,e.jsx)("p",{children:n.texts[33].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[n.texts[34].value,(0,e.jsx)("code",{children:n.texts[35].value})]}),(0,e.jsxs)("li",{children:[n.texts[36].value,(0,e.jsx)("a",{href:"https://redux-toolkit.js.org/api/configureStore",children:n.texts[37].value})]})]}),(0,e.jsx)("p",{children:n.texts[38].value}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[39].value}),(0,e.jsxs)("h5",{id:"\u7EA6\u5B9A\u5F0F\u7684-model-\u7EC4\u7EC7\u65B9\u5F0F",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7EA6\u5B9A\u5F0F\u7684-model-\u7EC4\u7EC7\u65B9\u5F0F",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u7EA6\u5B9A\u5F0F\u7684 model \u7EC4\u7EC7\u65B9\u5F0F"]}),(0,e.jsx)("p",{children:n.texts[40].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[41].value}),n.texts[42].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[43].value}),n.texts[44].value,(0,e.jsx)("code",{children:n.texts[45].value}),n.texts[46].value]})]}),(0,e.jsx)("p",{children:n.texts[47].value}),(0,e.jsx)(s.Z,{lang:"txt",children:n.texts[48].value}),(0,e.jsxs)("p",{children:[n.texts[49].value,(0,e.jsx)("code",{children:n.texts[50].value}),n.texts[51].value,(0,e.jsx)("code",{children:n.texts[52].value}),n.texts[53].value]}),(0,e.jsx)("p",{children:n.texts[54].value}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[55].value}),(0,e.jsx)("p",{children:n.texts[56].value}),(0,e.jsx)(s.Z,{lang:"ts",children:n.texts[57].value}),(0,e.jsxs)("h2",{id:"\u62D3\u5C55",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u62D3\u5C55",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u62D3\u5C55"]}),(0,e.jsxs)("h3",{id:"\u4ECB\u7ECD-2",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4ECB\u7ECD-2",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u4ECB\u7ECD"]}),(0,e.jsxs)("p",{children:[n.texts[58].value,(0,e.jsx)("code",{children:n.texts[59].value}),n.texts[60].value]}),(0,e.jsxs)("p",{children:[n.texts[61].value,(0,e.jsx)(l.rU,{to:"/scaffold/2-pluginapi",children:n.texts[62].value})]}),(0,e.jsxs)("h3",{id:"\u6848\u4F8B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u6848\u4F8B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u6848\u4F8B"]}),(0,e.jsx)(s.Z,{lang:"js",children:n.texts[63].value})]})})})})}t.default=u},58932:function(i,t,a){a.r(t),a.d(t,{texts:function(){return d}});const d=[{value:"\u5B89\u88C5 ",paraId:0,tocIndex:2},{value:"npm i @aniyajs/router",paraId:0,tocIndex:2},{value:"\u914D\u7F6E ",paraId:0,tocIndex:2},{value:"config/config",paraId:0,tocIndex:2},{value:" \u6587\u4EF6\u542F\u7528\u3002",paraId:0,tocIndex:2},{value:"\u7A33\u5B9A\u7248\uFF1A",paraId:1,tocIndex:3},{value:" ",paraId:1,tocIndex:3},{value:"\u63D0\u4F9B\u5B8C\u5584\u7684 Aniya \u98CE\u683C\u7684\u53EF\u914D\u7F6E\u5F0F\u8DEF\u7531\uFF0C\u4F60\u53EF\u4EE5\u8FD9\u6837\u5199\uFF1A",paraId:2,tocIndex:3},{value:`{
  routes: [
    {
      name: "home",
      title: "\u9996\u9875",
      path: '/',
      component: './home',
    },
    {
      name: "login",
      title: "\u767B\u5F55\u9875",
      path: '/login',
      component: './sys/login',
    },
    {
      name: "user",
      title: "\u4E2A\u4EBA\u4E2D\u5FC3",
      path: '/user',
      component: './sys/user',
    }
  ],
  aniyaPlugins: [
    '@aniyajs/plugin-router'
  ],
}
`,paraId:3,tocIndex:3},{value:"name",paraId:4,tocIndex:4},{value:"\uFF1A\u540D\u79F0\uFF0CType\uFF1A",paraId:4,tocIndex:4},{value:"String",paraId:4,tocIndex:4},{value:"path",paraId:4,tocIndex:4},{value:"\uFF1A\u8DEF\u7531\u5730\u5740\uFF0CType\uFF1A",paraId:4,tocIndex:4},{value:"String",paraId:4,tocIndex:4},{value:"redirect",paraId:4,tocIndex:4},{value:"\uFF1A\u91CD\u5B9A\u5411\uFF0CType\uFF1A",paraId:4,tocIndex:4},{value:"String",paraId:4,tocIndex:4},{value:"routes",paraId:4,tocIndex:4},{value:"\uFF1A\u5B50\u8DEF\u7531\uFF0CType\uFF1A",paraId:4,tocIndex:4},{value:"IRoute[] | []",paraId:4,tocIndex:4},{value:"component",paraId:4,tocIndex:4},{value:"\uFF1A\u76F8\u5BF9\u4E8E ",paraId:4,tocIndex:4},{value:"src/pages",paraId:4,tocIndex:4},{value:" \u7684\u76F8\u5BF9\u6587\u4EF6\u5730\u5740\uFF0CType\uFF1A",paraId:4,tocIndex:4},{value:"String",paraId:4,tocIndex:4},{value:"\u5B89\u88C5 ",paraId:5,tocIndex:6},{value:"npm i @aniyajs/tooltik",paraId:5,tocIndex:6},{value:"\u914D\u7F6E ",paraId:5,tocIndex:6},{value:"config/config",paraId:5,tocIndex:6},{value:" \u6587\u4EF6\u542F\u7528\u3002",paraId:5,tocIndex:6},{value:"\u7A33\u5B9A\u7248\uFF1A",paraId:6,tocIndex:7},{value:" ",paraId:6,tocIndex:7},{value:"\u5305\u542B\u4EE5\u4E0B\u529F\u80FD\uFF1A",paraId:7,tocIndex:7},{value:"\u5185\u7F6E ",paraId:8,tocIndex:7},{value:"@reduxjs/tooltik",paraId:8,tocIndex:7},{value:"\u5177\u4F53\u4F7F\u7528\u8BF7\u67E5\u770B",paraId:8,tocIndex:7},{value:"\u6587\u6863",paraId:8,tocIndex:7},{value:"\u914D\u7F6E\uFF0C\u6BD4\u5982\uFF1A",paraId:9,tocIndex:7},{value:`{
  toolTik: true,
  aniyaPlugins: [
    '@aniyajs/plugin-tooltik',
  ],
}
`,paraId:10,tocIndex:7},{value:"\u7B26\u5408\u4EE5\u4E0B\u89C4\u5219\u7684\u6587\u4EF6\u4F1A\u88AB\u8BA4\u4E3A\u662F model \u6587\u4EF6\uFF1A",paraId:11,tocIndex:8},{value:"src/models",paraId:12,tocIndex:8},{value:" \u4E0B\u7684\u6587\u4EF6",paraId:12,tocIndex:8},{value:"src/pages",paraId:12,tocIndex:8},{value:" \u4E0B\uFF0C\u6240\u6709 ",paraId:12,tocIndex:8},{value:"model.{ts,js}",paraId:12,tocIndex:8},{value:" \u6587\u4EF6(\u4E0D\u533A\u5206\u4EFB\u4F55\u5B57\u6BCD\u5927\u5C0F\u5199)",paraId:12,tocIndex:8},{value:"\u6BD4\u5982\uFF1A",paraId:13,tocIndex:8},{value:`\u2014\u2014 src
  \u2014\u2014 models
    \u2014\u2014 a.*
  \u2014\u2014 pages
    \u2014\u2014 home
      \u2014\u2014 model.*
`,paraId:14,tocIndex:8},{value:"\u5176\u4E2D ",paraId:15,tocIndex:8},{value:"a.*",paraId:15,tocIndex:8},{value:"\uFF0C",paraId:15,tocIndex:8},{value:"model.*",paraId:15,tocIndex:8},{value:"\uFF0C\u5982\u679C\u5185\u5BB9\u4E3A\u6B63\u786E\u7684 @aniyajs/tooltik model \u5199\u6CD5\uFF0C\u4F1A\u88AB\u8BA4\u4E3A\u662F model \u6587\u4EF6\u3002\u6BD4\u5982\u4F60\u53EF\u4EE5\u8FD9\u6837\u5199\uFF1A",paraId:15,tocIndex:8},{value:"models/user.ts",paraId:16,tocIndex:8},{value:`import { createAsyncThunk } from '@aniyajs/plugin-tooltik';
import { getUserInfo, getCode } from '@/services/user';

export interface LoginInfoType {
  name: string
  avatar: string
  email: string
  phone: string
  role: string
}

export interface UserState {
  loginInfo: Partial<LoginInfoType>
  userInfo: Partial<any>
  code: string
  loading: 'idle' | 'pending' | 'succeeded' | 'failed'
}

export interface UserModel {
  name: 'user'
  initialState: UserState
  reducers: {
    save: (state: UserState, _: { payload: any }) => void
  },
  extraReducers: (builder: any) => void;
}

export const getUserInfoAsync = createAsyncThunk(
  'user/getUserInfo',
  getUserInfo
);

export const getCodeAsync = createAsyncThunk(
  'user/getCode',
  getCode
);

export const initializeApp = createAsyncThunk(
  'user/initialize',
  async (_, { dispatch }) => {
    // \u{1F517} \u4E32\u884C\u6267\u884C\u591A\u4E2A\u5F02\u6B65\u8BF7\u6C42
    const user = await dispatch(getUserInfoAsync()).unwrap();
    const code = await dispatch(getCodeAsync()).unwrap();

    return { user, code };
  }
);

const userModel: UserModel = {
  name: "user",
  initialState: {
    loginInfo: {},
    userInfo: {},
    code: '',
    loading: 'idle',
  },
  reducers: {
    save: (state, { payload }) => {
      let _state = state
      _state = Object.assign(state, {
        ...payload,
      })
    },
  },
  extraReducers: (builder) => {
    builder
      .addCase(initializeApp.pending, (state: any) => {
        state.loading = 'pending';
      })
      .addCase(initializeApp.fulfilled, (state: any, action: any) => {
        state.loading = 'succeeded';

        if (action?.payload?.user?.code === 200) {
          state.userInfo = action?.payload?.user?.result ?? {}
        } else {
          state.userInfo = {}
        }

        if (action?.payload?.code?.code === 200) {
          state.code = action?.payload?.code?.result ?? {}
        } else {
          state.code = {}
        }
      });
  }
}

export default userModel
`,paraId:17,tocIndex:8},{value:"services/user.ts",paraId:18,tocIndex:8},{value:`import axios from 'axios';
export const getUserInfo = async () => {
  return new Promise((resolve, reject) => {
    axios.post('/api/user/info').then(res => {
      if (res?.status === 200) {
        resolve(res?.data)
      } else {
        reject(false)
      }
    }).catch(err => { 
      reject(false)
    });
  })
}

export const getCode = async () => {
  return new Promise((resolve, reject) => {
    axios.post('/api/user/getCode').then(res => {
      if (res?.status === 200) {
        resolve(res?.data)
      } else {
        reject(false)
      }
    }).catch(err => { 
      reject(false)
    });
  })
}
`,paraId:19,tocIndex:8},{value:"\u4E3A\u4E86\u63D0\u9AD8\u63D2\u4EF6\u7684\u53EF\u62D3\u5C55\u6027\uFF0C\u6211\u4EEC\u63D0\u4F9B\u4E86\u63D2\u4EF6\u5F00\u53D1\u7684\u80FD\u529B\uFF0C\u4F60\u53EF\u4EE5\u521B\u5EFA ",paraId:20,tocIndex:10},{value:"lib.js",paraId:20,tocIndex:10},{value:" \u6587\u4EF6\u57FA\u4E8E\u6211\u4EEC\u63D0\u4F9B\u7684api\u5F00\u53D1\u81EA\u5DF1\u7684\u63D2\u4EF6\u3002",paraId:20,tocIndex:10},{value:"\u5177\u4F53api\u8BF7\u67E5\u9605",paraId:21,tocIndex:10},{value:"\u6587\u6863",paraId:22,tocIndex:10},{value:`/**
 * \u4EE5\u4E0B\u7528\u5230\u4E86 \`describe\` \u548C \`modifyConfig\`\uFF0C\u7528\u4E8E\u81EA\u5B9A\u4E49\u6539 aniya \u811A\u624B\u67B6\u7684 title \u914D\u7F6E
 */
// lib.js

export default (api) => {
  api.describe({
    key:"headTitle1",
    config: {
      default: () => "\u8FD9\u662F\u4E00\u4E2A\u6D4B\u8BD51",
    }
  });
  api.modifyConfig((memo) => {
    memo.title = (memo.headTitle1 != undefined) ? memo.headTitle2 : api.describeParams.config.default;
    return memo;
  })
};
`,paraId:23,tocIndex:11}]}}]);
